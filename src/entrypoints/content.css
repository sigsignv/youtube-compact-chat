@charset "UTF-8";

ytd-watch-flexy:not([watch-while-panels-active]) {
  --ycc-required-min-height: 360px;

  --ycc-masthead-offset: calc(
    var(--ytd-watch-flexy-masthead-height) +
    var(--ytd-margin-6x)
  );

  /* Stacked chat layout */
  #below {
    #chat.ytd-watch-flexy:not([collapsed]) {
      --ycc-video-player-height: calc(
        (100vw - var(--ytd-watch-flexy-scrollbar-width)) /
        var(--ytd-watch-flexy-width-ratio) *
        var(--ytd-watch-flexy-height-ratio)
      );

      height: min(
        calc(
          100vh -
          var(--ycc-masthead-offset) -
          var(--ycc-video-player-height) -
          var(--ytd-margin-4x)
        ),
        var(--ytd-watch-flexy-chat-max-height)
      );
      min-height: var(--ycc-required-min-height);
    }
  }

  /* Side-by-side chat layout */
  &:not([theater]) {
    #secondary {
      #chat.ytd-watch-flexy:not([collapsed]) {
        --ycc-default-min-height: 596px;

        min-height: clamp(
          var(--ycc-required-min-height),
          calc(100vh - var(--ycc-masthead-offset)),
          var(--ycc-default-min-height)
        );
      }
    }
  }
}
